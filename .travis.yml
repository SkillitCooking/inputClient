osx_image: xcode8.3
sudo: required
dist: trusty
language: c
env:
  matrix:
  - CSC_LINK=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
  - secure: bX/1t5iCTB7nrX/9zdq7b3Bt6/HBZLdC76tHAJXcBAwFyN6IVO8bp32QnGTdB7VR+j35tTnctFzG22gKdoTURvb+BEg8MhcyHooBV1fZhq+uYXMiyw5sdEKSFcwN0qRChUV08G7fm84WWwK7oGbX/A4vnIKWw9fn+xbrU8epyLnSD+mD6A10Tr1hBNVuDm9jl9+yV0jNXF8gM+V34mhsBwEvI1XZqhkfGkXxqsQ2Jn03ieEnwFrl/zqBo6bBcRdTWv4iNnJwJQK91DWJOPazSNRZxrhqd0FN6oTLmKi4Qj0kDa5buwjgWv/h++7Ue1nc8wWPwyGN0QyAE3I5bRO9NVUxtbXUdLX4LpzwWbPVqICjLU9FP8zKvaQP2zk6bCQpN0VGj2UXVqTk31i9fjUq6b4Vv6Gi1YTHQANJ6IVav/A7B2fXAJ4g12h+Q9K4NxbGef3AT/b94RysL8axbKFwMvyIBndV6IQmre7ppIy7CGSGa9Lfrbr6a/baQFdf+xCd0ZDw1su9Mwbv89MrOXs1BFpaFqQb2YwUoLRm68ZLYFAx+EGipHeB2P9nwpXvuLE5P6tTinRVLlmLUZ/5f4kwjjAP/AP4m5F9pTjy2BsumDe0kBhKokmjqAqd5XO+gjoGT1GeRFw6d14ktj67Hg8EkfmQ47M4SYHi/AkNxbfCGaw=
  - secure: CQAcPYvsPlNyK1dgoHJC37HnDqS26Egp3quxqJ8k6YAQ6LKGWWd/QwYotqC87NjtRM95CDbwl0xhkn4TH4V/B+xKiCZlpcwzsKy7IwjsxvDinWkyc3XVs8ipEToWMZIJHbUh3Pctm9Nqfey3p1mr3uSgC/hcispGrC8O1Wiqeqit5KVy/43oF4VM6LyqVLG4G2oIMW6pAxyCOKB/9HZjT5GqFEQ49w/eRlem1SyQAl6EUa5BPE0qKENS+VcMRr58UcWw1Ud9+CxCoF4m2X5SfpyEk6ZZ93agmZdzdhzF7cn4glXL1Fz5Rs6nE0gQV4TIEl3kT0MwuIMNRDWDEij+rrJkNMW3c6Lhd4Q03fRovl1oBnII+r318d9MFIuSWfOMGQ+GA5a3MEAiZHeYHnDB1o0KzSa34YCOTah3rDJCOA/tNBtNtAXdIalXq/umhqxl/veqXZ7pLNSu7dhYNZbO2Z4iSYeG1G8/cJ8FTcwVO5MoNWfzQ/zLNSDxM+h/khPWsPyRTLZi156xUprNGH29EFKf+ImPZuU8MYuOI5V1xevSC5ET/Q/sYuOhVTlpGGlVLSM4lAuaBMZoXIObfYpRLwnDiQlFpzs3+Ac7P9Y5r5NJ5vqQP/CB+XbDvFMdFDVQpyFBLnk6hC/+IoRhPe5m/fTfp5xzQuGpthz0LFSIXi4=
matrix:
  include:
  - os: osx
  - os: linux
    env: CC=clang CXX=clang++ npm_config_clang=1
    compiler: clang
cache:
  directories:
  - node_modules
  - "$HOME/.electron"
  - "$HOME/.cache"
addons:
  apt:
    packages:
    - libgnome-keyring-dev
    - icnsutils
before_install:
- mkdir -p /tmp/git-lfs 
- curl -L https://github.com/github/git-lfs/releases/download/v1.2.1/git-lfs-$([
  "$TRAVIS_OS_NAME" == "linux" ] && echo "linux" || echo "darwin")-amd64-1.2.1.tar.gz
- tar -xz -C /tmp/git-lfs --strip-components 1
- /tmp/git-lfs/git-lfs pull
- if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then sudo apt-get install --no-install-recommends
  -y icnsutils graphicsmagick xz-utils; fi
install:
- nvm install 7
- curl -o- -L https://yarnpkg.com/install.sh | bash
- source ~/.bashrc
- npm install -g xvfb-maybe
- yarn
script:
- yarn run build
branches:
  only:
  - master
