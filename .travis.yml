# Commented sections below can be used to run tests on the CI server
# https://simulatedgreg.gitbooks.io/electron-vue/content/en/testing.html#on-the-subject-of-ci-testing
osx_image: xcode8.3
sudo: required
dist: trusty
language: c
env:
- GH_TOKEN=7a4d0e9a199f36948d9e9f92272c47efed5451dc
- CSC_LINK=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
TzNCJyIUdAIBAQ==
- CSC_PASSWORD=#6996H258d
matrix:
  include:
  - os: osx
  - os: linux
    env: CC=clang CXX=clang++ npm_config_clang=1
    compiler: clang
cache:
  directories:
  - node_modules
  - "$HOME/.electron"
  - "$HOME/.cache"
addons:
  apt:
    packages:
    - libgnome-keyring-dev
    - icnsutils
    #- xvfb
before_install:
- mkdir -p /tmp/git-lfs && curl -L https://github.com/github/git-lfs/releases/download/v1.2.1/git-lfs-$([
  "$TRAVIS_OS_NAME" == "linux" ] && echo "linux" || echo "darwin")-amd64-1.2.1.tar.gz
  | tar -xz -C /tmp/git-lfs --strip-components 1 && /tmp/git-lfs/git-lfs pull
- if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then sudo apt-get install --no-install-recommends -y icnsutils graphicsmagick xz-utils; fi
install:
#- export DISPLAY=':99.0'
#- Xvfb :99 -screen 0 1024x768x24 > /dev/null 2>&1 &
- nvm install 7
- curl -o- -L https://yarnpkg.com/install.sh | bash
- source ~/.bashrc
- npm install -g xvfb-maybe
- yarn
script:
#- xvfb-maybe node_modules/.bin/karma start test/unit/karma.conf.js
#- yarn run pack && xvfb-maybe node_modules/.bin/mocha test/e2e
- yarn run build
branches:
  only:
  - master
